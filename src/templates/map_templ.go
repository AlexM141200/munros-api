// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.906
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

func Map() templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<main class=\"h-[calc(100vh-80px)] relative\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = Hero().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = Search().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<!-- Map Container --><div id=\"map\" class=\"w-full h-full\"></div><!-- Loading Overlay --><div id=\"loading-overlay\" class=\"w-full h-full flex items-center justify-center bg-gray-100 absolute top-0 left-0\"><div class=\"text-center\"><div class=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500 mx-auto mb-4\"></div><p class=\"text-gray-600\">Loading map...</p></div></div></main><script>\n\t\t// Global variables\n\t\tlet map;\n\t\tlet munros = [];\n\t\tlet filteredMunros = [];\n\t\tlet markers = [];\n\t\tlet selectedMunro = null;\n\n\t\t// Initialize the application\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function () {\n\t\t\tinitializeMap();\n\t\t\tloadMunros();\n\t\t});\n\n\t\t// Initialize the Leaflet map\n\t\tfunction initializeMap() {\n\t\t\t// Scotland bounds\n\t\t\tconst scotlandBounds = L.latLngBounds(\n\t\t\t\t[54.6, -7.5], // Southwest corner\n\t\t\t\t[60.9, -0.5], // Northeast corner\n\t\t\t);\n\n\t\t\tmap = L.map(\"map\", {\n\t\t\t\tcenter: [56.8, -4.2], // Center of Scotland\n\t\t\t\tzoom: 7,\n\t\t\t\tminZoom: 6,\n\t\t\t\tmaxZoom: 14,\n\t\t\t\tmaxBounds: scotlandBounds,\n\t\t\t\tmaxBoundsViscosity: 1.0,\n\t\t\t\tworldCopyJump: false,\n\t\t\t\tzoomSnap: 0.25,\n\t\t\t});\n\n\t\t\t// Add tile layer\n\t\t\tL.tileLayer(\n\t\t\t\t\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n\t\t\t\t{\n\t\t\t\t\tattribution:\n\t\t\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t\t\t},\n\t\t\t).addTo(map);\n\t\t}\n\n\t\t// Load munros from API\n\t\tasync function loadMunros() {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(\"/api/munros\");\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(\"Failed to fetch munros\");\n\t\t\t\t}\n\n\t\t\t\tmunros = await response.json();\n\t\t\t\tfilteredMunros = [...munros];\n\n\t\t\t\tupdateMunroCount();\n\t\t\t\taddMarkersToMap();\n\t\t\t\thideLoadingOverlay();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Error loading munros:\", error);\n\t\t\t\tconst munroCountEl = document.getElementById(\"munro-count\");\n\t\t\t\tconst filterCountEl = document.getElementById(\"munro-filter-count\");\n\t\t\t\tif (munroCountEl) munroCountEl.textContent = \"Error loading munros\";\n\t\t\t\tif (filterCountEl) filterCountEl.textContent = \"Error loading munros\";\n\t\t\t\thideLoadingOverlay();\n\t\t\t}\n\t\t}\n\n\t\t// Create custom Munro icon\n\t\tfunction createMunroIcon() {\n\t\t\tconst svgIcon = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\"><path fill=\"#2563eb\" d=\"M12 2L3 22h18L12 2zm0 4.5L18.5 20h-13L12 6.5z\"/><circle cx=\"12\" cy=\"8\" r=\"1.5\" fill=\"#ffffff\"/></svg>';\n\n\t\t\treturn L.icon({\n\t\t\t\ticonUrl: \"data:image/svg+xml;base64,\" + btoa(svgIcon),\n\t\t\t\ticonSize: [24, 24],\n\t\t\t\ticonAnchor: [12, 24],\n\t\t\t\tpopupAnchor: [0, -24],\n\t\t\t});\n\t\t}\n\n\t\t// Add markers to map\n\t\tfunction addMarkersToMap() {\n\t\t\t// Clear existing markers\n\t\t\tmarkers.forEach((marker) => map.removeLayer(marker));\n\t\t\tmarkers = [];\n\n\t\t\tconst munroIcon = createMunroIcon();\n\n\t\t\tfilteredMunros.forEach((munro) => {\n\t\t\t\tconst marker = L.marker([munro.latitude, munro.longitude], {\n\t\t\t\t\ticon: munroIcon,\n\t\t\t\t}).addTo(map);\n\n\t\t\t\tmarker.bindPopup(createPopupContent(munro));\n\t\t\t\tmarker.on(\"click\", () => handleMunroClick(munro));\n\n\t\t\t\tmarkers.push(marker);\n\t\t\t});\n\n\t\t\t// Fit map to show all markers\n\t\t\tif (filteredMunros.length > 0) {\n\t\t\t\tconst bounds = L.latLngBounds(\n\t\t\t\t\tfilteredMunros.map((munro) => [\n\t\t\t\t\t\tmunro.latitude,\n\t\t\t\t\t\tmunro.longitude,\n\t\t\t\t\t]),\n\t\t\t\t);\n\t\t\t\tmap.fitBounds(bounds, { padding: [20, 20] });\n\t\t\t}\n\t\t}\n\n\t\t// Create popup content\n\t\tfunction createPopupContent(munro) {\n\t\t\tconst formatHeight = (heightM, heightFt) => {\n\t\t\t\treturn heightM.toFixed(1) + \"m (\" + heightFt.toLocaleString() + \"ft)\";\n\t\t\t};\n\n\t\t\tlet html = '<div class=\"min-w-[280px] max-w-[400px]\">';\n\t\t\thtml += '<h3 class=\"text-lg font-bold text-gray-800 mb-2\">' + munro.name + '</h3>';\n\t\t\thtml += '<div class=\"space-y-2 text-sm\">';\n\n\t\t\thtml += '<div class=\"flex justify-between\">';\n\t\t\thtml += '<span class=\"font-semibold text-gray-600\">Height:</span>';\n\t\t\thtml += '<span class=\"text-gray-800\">' + formatHeight(munro.height_m, munro.height_ft) + '</span>';\n\t\t\thtml += '</div>';\n\n\t\t\thtml += '<div class=\"flex justify-between\">';\n\t\t\thtml += '<span class=\"font-semibold text-gray-600\">Classification:</span>';\n\t\t\tconst classificationClass = munro.classification === \"Munro\" ? \"bg-blue-100 text-blue-800\" : \"bg-gray-100 text-gray-800\";\n\t\t\thtml += '<span class=\"px-2 py-1 rounded text-xs font-medium ' + classificationClass + '\">' + munro.classification + '</span>';\n\t\t\thtml += '</div>';\n\n\t\t\thtml += '<div class=\"flex justify-between\">';\n\t\t\thtml += '<span class=\"font-semibold text-gray-600\">SMC Section:</span>';\n\t\t\thtml += '<span class=\"text-gray-800\">' + munro.smc_section + '</span>';\n\t\t\thtml += '</div>';\n\n\t\t\thtml += '<div class=\"flex justify-between\">';\n\t\t\thtml += '<span class=\"font-semibold text-gray-600\">Grid Reference:</span>';\n\t\t\thtml += '<span class=\"text-gray-800 font-mono\">' + munro.grid_ref + '</span>';\n\t\t\thtml += '</div>';\n\n\t\t\tif (munro.comments) {\n\t\t\t\thtml += '<div class=\"border-t pt-2\">';\n\t\t\t\thtml += '<span class=\"font-semibold text-gray-600\">Comments:</span>';\n\t\t\t\thtml += '<p class=\"text-gray-700 text-xs mt-1\">' + munro.comments + '</p>';\n\t\t\t\thtml += '</div>';\n\t\t\t}\n\n\t\t\thtml += '</div>';\n\t\t\thtml += '<div class=\"flex gap-2 mt-3 pt-3 border-t\">';\n\n\t\t\tif (munro.streetmap_url) {\n\t\t\t\thtml += '<a href=\"' + munro.streetmap_url + '\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600\">Street Map</a>';\n\t\t\t}\n\n\t\t\tif (munro.geograph_url) {\n\t\t\t\thtml += '<a href=\"' + munro.geograph_url + '\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600\">Photos</a>';\n\t\t\t}\n\n\t\t\tif (munro.hill_bagging_url) {\n\t\t\t\thtml += '<a href=\"' + munro.hill_bagging_url + '\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-xs bg-purple-500 text-white px-2 py-1 rounded hover:bg-purple-600\">Hill Bagging</a>';\n\t\t\t}\n\n\t\t\thtml += '</div>';\n\t\t\thtml += '</div>';\n\n\t\t\treturn html;\n\t\t}\n\n\t\t// Handle munro click\n\t\tfunction handleMunroClick(munro) {\n\t\t\tselectedMunro = munro;\n\t\t\t// Additional click handling can be added here\n\t\t}\n\n\t\t// Filter munros based on search\n\t\tfunction filterMunros() {\n\t\t\tconst searchInput = document.getElementById(\"search-input\");\n\t\t\tif (!searchInput) return;\n\n\t\t\tconst searchTerm = searchInput.value.toLowerCase().trim();\n\n\t\t\tif (searchTerm === \"\") {\n\t\t\t\tfilteredMunros = [...munros];\n\t\t\t} else {\n\t\t\t\tfilteredMunros = munros.filter(\n\t\t\t\t\t(munro) =>\n\t\t\t\t\t\tmunro.name.toLowerCase().includes(searchTerm) ||\n\t\t\t\t\t\tmunro.smc_section.toLowerCase().includes(searchTerm),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tupdateFilterCount();\n\t\t\taddMarkersToMap();\n\t\t}\n\n\t\t// Update munro count\n\t\tfunction updateMunroCount() {\n\t\t\tconst munroCountEl = document.getElementById(\"munro-count\");\n\t\t\tif (munroCountEl) {\n\t\t\t\tmunroCountEl.textContent = munros.length + \" Munros Available\";\n\t\t\t}\n\t\t}\n\n\t\t// Update filter count\n\t\tfunction updateFilterCount() {\n\t\t\tconst filterCountEl = document.getElementById(\"munro-filter-count\");\n\t\t\tif (filterCountEl) {\n\t\t\t\tfilterCountEl.textContent = \"Showing \" + filteredMunros.length + \" of \" + munros.length + \" munros\";\n\t\t\t}\n\t\t}\n\n\t\t// Close hero overlay\n\t\tfunction closeHero() {\n\t\t\tconst heroEl = document.getElementById(\"hero-overlay\");\n\t\t\tif (heroEl) {\n\t\t\t\theroEl.style.display = \"none\";\n\t\t\t}\n\t\t}\n\n\t\t// Hide loading overlay\n\t\tfunction hideLoadingOverlay() {\n\t\t\tconst loadingEl = document.getElementById(\"loading-overlay\");\n\t\t\tif (loadingEl) {\n\t\t\t\tloadingEl.style.display = \"none\";\n\t\t\t}\n\t\t}\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
